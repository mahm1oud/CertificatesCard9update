# دليل تثبيت منصة الشهادات والبطاقات على استضافة هوستنجر

هذا الدليل المفصل يشرح كيفية تنصيب منصة الشهادات والبطاقات الإلكترونية على استضافة هوستنجر باستخدام قاعدة بيانات MySQL.

## المتطلبات

1. استضافة هوستنجر مع دعم Node.js (أي خطة Premium أو Business)
2. قاعدة بيانات MySQL (متوفرة في جميع خطط هوستنجر)
3. نطاق مخصص (Domain) للموقع

## خطوات التثبيت

### 1. إعداد قاعدة البيانات MySQL

1. قم بتسجيل الدخول إلى لوحة تحكم هوستنجر
2. انتقل إلى قسم "قواعد البيانات" واختر "MySQL"
3. قم بإنشاء قاعدة بيانات جديدة وتدوين المعلومات التالية:
   - اسم قاعدة البيانات
   - اسم المستخدم
   - كلمة المرور
   - المضيف (عادة `localhost`)
   - المنفذ (عادة `3306`)

### 2. تحميل الملفات إلى هوستنجر

هناك طريقتان لتحميل الملفات:

#### أ) باستخدام Git

1. قم بتسجيل الدخول إلى حسابك في هوستنجر عبر SSH
2. انتقل إلى المجلد الجذر لموقعك
3. استنسخ المستودع باستخدام الأمر:

```bash
git clone https://github.com/username/CertificatesCard.git .
```

> ملاحظة: لا تنسَ النقطة `.` في نهاية الأمر، فهي تشير إلى المجلد الحالي.

#### ب) باستخدام FTP

1. قم بضغط الملفات كملف ZIP
2. قم بتسجيل الدخول إلى مدير ملفات هوستنجر أو استخدم برنامج FTP مثل FileZilla
3. قم بتحميل ملف ZIP إلى المجلد الجذر لموقعك
4. قم بفك ضغط الملف في المجلد الجذر

### 3. إعداد ملف التكوين

1. انسخ ملف `hostinger.config.example.js` وأعد تسميته إلى `hostinger.config.js`
2. قم بتعديل معلومات قاعدة البيانات في الملف:

```javascript
module.exports = {
  database: {
    type: 'mysql',               // نوع قاعدة البيانات
    host: 'localhost',           // مضيف قاعدة البيانات
    user: 'USERNAME',            // اسم المستخدم (استبدله)
    password: 'PASSWORD',        // كلمة المرور (استبدلها)
    name: 'DATABASE_NAME',       // اسم قاعدة البيانات (استبدله)
    port: '3306'                 // منفذ MySQL، عادة 3306
  },
  server: {
    port: 5000,                  // المنفذ الداخلي للخادم
    hostname: '0.0.0.0',         // يستمع على جميع الواجهات
    trustProxy: true             // ضروري لعمل التطبيق خلف Nginx
  },
  paths: {
    uploads: 'uploads',          // مجلد تحميل الملفات
    temp: 'temp',                // مجلد الملفات المؤقتة 
    logs: 'logs',                // مجلد ملفات السجل
    fonts: 'fonts'               // مجلد الخطوط
  },
  express: {
    sessionSecret: 'RANDOM_SECRET_KEY', // استبدله بمفتاح عشوائي
    cookieMaxAge: 86400000 * 30        // مدة صلاحية ملف تعريف الارتباط (30 يوم)
  },
  app: {
    name: 'منصة الشهادات والبطاقات الإلكترونية',
    url: 'https://yourdomain.com',      // استبدله بعنوان موقعك
    apiPrefix: '/api',
    defaultLanguage: 'ar',
    adminEmail: 'admin@example.com'     // بريدك الإلكتروني
  }
};
```

### 4. إنشاء ملف إعدادات Node.js في هوستنجر

1. في لوحة تحكم هوستنجر، انتقل إلى قسم "المواقع الإلكترونية" واختر موقعك
2. انتقل إلى تبويب "الإعدادات المتقدمة"
3. قم بتفعيل Node.js وضبط الإعدادات التالية:
   - نقطة الدخول: `server/index.js` (أو `dist/server/index.js` إذا كنت تستخدم الإصدار المبني)
   - إصدار Node.js: اختر أحدث إصدار متوفر (18.x على الأقل)
   - نوع البناء: اختر "package.json"
   - أمر البدء: `npm start`
   - نوع التطبيق: "شبكة الويب"
   - المنفذ: `5000`

### 5. إعداد متغيرات البيئة

في قسم "الإعدادات المتقدمة" > "متغيرات البيئة"، قم بإضافة المتغيرات التالية:

- `NODE_ENV`: `production`
- `DB_TYPE`: `mysql`

> ملاحظة: لا تحتاج إلى إضافة متغيرات قاعدة البيانات الأخرى حيث سيتم قراءتها من ملف `hostinger.config.js`

### 6. إنشاء مجلدات التطبيق

قم بالاتصال عبر SSH أو استخدم مدير الملفات لإنشاء المجلدات التالية:

```bash
mkdir -p uploads temp logs
chmod 755 uploads temp logs
```

### 7. تثبيت الاعتماديات وبناء التطبيق

عبر SSH، قم بتنفيذ الأوامر التالية:

```bash
npm install
npm run build
```

### 8. إنشاء جداول قاعدة البيانات

1. قم بإنشاء ملف SQL لجداول البيانات:

```bash
node ./scripts/setup-mysql.js
```

2. أو قم بتنفيذ ملف SQL مباشرة من خلال phpMyAdmin:
   - قم بتسجيل الدخول إلى phpMyAdmin من لوحة تحكم هوستنجر
   - اختر قاعدة البيانات التي أنشأتها
   - انتقل إلى تبويب "استيراد"
   - قم باستيراد ملف `certificates_database.sql` الموجود في جذر المشروع

### 9. إعداد توجيه النطاق

1. في لوحة تحكم هوستنجر، انتقل إلى الإعدادات المتقدمة > "إعادة توجيه النطاق"
2. قم بإضافة إعادة توجيه من `www.yourdomain.com` إلى `yourdomain.com` (أو العكس)

### 10. بدء تشغيل التطبيق

1. في لوحة تحكم هوستنجر، انتقل إلى قسم "المواقع الإلكترونية" واختر موقعك
2. انقر على "إعادة تشغيل" لتطبيق Node.js
3. انتظر حتى يتم بدء تشغيل التطبيق (قد يستغرق ذلك بضع دقائق)

### 11. تسجيل الدخول واستخدام التطبيق

1. قم بزيارة موقعك على الإنترنت: `https://yourdomain.com`
2. قم بتسجيل الدخول باستخدام:
   - اسم المستخدم: `admin`
   - كلمة المرور: `700700`
3. قم بتغيير كلمة المرور الافتراضية فورًا من لوحة التحكم

## استكشاف الأخطاء وإصلاحها

### المشكلة: التطبيق لا يبدأ التشغيل

1. تحقق من سجلات الخطأ في لوحة تحكم هوستنجر
2. تأكد من تفعيل Node.js وضبط المنفذ الصحيح (5000)
3. تحقق من إعدادات قاعدة البيانات في ملف `hostinger.config.js`

### المشكلة: خطأ في الاتصال بقاعدة البيانات

1. تأكد من صحة إعدادات قاعدة البيانات
2. تحقق من إذا كانت قاعدة البيانات تعمل عبر phpMyAdmin
3. تحقق من مستوى الصلاحيات الممنوحة لمستخدم قاعدة البيانات

### المشكلة: الصور أو الخطوط لا تظهر

1. تأكد من أن المجلدات `uploads` و `fonts` موجودة ولديها الصلاحيات المناسبة
2. تحقق من المسار الصحيح في ملف `hostinger.config.js`

## الدعم والمساعدة

إذا واجهت أي مشكلات أثناء التثبيت، يرجى زيارة [موقع الدعم الفني](#) أو التواصل عبر البريد الإلكتروني: support@example.com.

---

آخر تحديث: 04 مايو 2025