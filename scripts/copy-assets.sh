#!/bin/bash

# Ø³ÙƒØ±ÙŠØ¨Øª Ù†Ø³Ø® Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©
# ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ù„Ù†Ø³Ø® Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© (fonts, shared, uploads) Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©

echo "ðŸ”„ Ù†Ø³Ø® Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©..."

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ù‹Ø§
mkdir -p server/dist

# Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ shared
if [ -d "shared" ]; then
  echo "ðŸ“ Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ shared..."
  mkdir -p server/dist/shared
  cp -r shared/* server/dist/shared/
  echo "âœ… ØªÙ… Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ shared Ø¨Ù†Ø¬Ø§Ø­."
else
  echo "âš ï¸ Ù…Ø¬Ù„Ø¯ shared ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯. Ù„Ù† ÙŠØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ø¬Ù„Ø¯."
fi

# Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ fonts
if [ -d "fonts" ]; then
  echo "ðŸ“ Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ fonts..."
  mkdir -p server/dist/fonts
  cp -r fonts/* server/dist/fonts/
  echo "âœ… ØªÙ… Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ fonts Ø¨Ù†Ø¬Ø§Ø­."
else
  echo "âš ï¸ Ù…Ø¬Ù„Ø¯ fonts ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯. Ù„Ù† ÙŠØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ø¬Ù„Ø¯."
fi

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ uploads ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹
echo "ðŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ uploads ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹..."
mkdir -p server/dist/uploads
mkdir -p server/dist/uploads/generated
mkdir -p server/dist/uploads/logos
mkdir -p server/dist/uploads/signatures
mkdir -p server/dist/uploads/images

# Ù†Ø³Ø® Ù…Ù„Ù Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù„Ù…Ø¬Ù„Ø¯ uploads Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ù‹Ø§
if [ -f "uploads/config.json" ]; then
  cp uploads/config.json server/dist/uploads/
  echo "âœ… ØªÙ… Ù†Ø³Ø® Ù…Ù„Ù config.json Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ uploads ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹."
fi

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ temp ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹
echo "ðŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ temp ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹..."
mkdir -p server/dist/temp

# Ù†Ø³Ø® Ù…Ù„ÙØ§Øª package.json Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
if [ -f "server/package.json" ]; then
  echo "ðŸ“„ Ù†Ø³Ø® Ù…Ù„Ù package.json Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©..."
  cp server/package.json server/dist/
  echo "âœ… ØªÙ… Ù†Ø³Ø® Ù…Ù„Ù package.json Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ù†Ø¬Ø§Ø­."
else
  echo "âš ï¸ Ù…Ù„Ù package.json Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯. Ù„Ù† ÙŠØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ù„Ù."
fi

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù README.md ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹
echo "ðŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù README.md ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹..."
echo "# ÙˆØ§Ø¬Ù‡Ø© Ø®Ù„ÙÙŠØ© Ù„ØªØ·Ø¨ÙŠÙ‚ \"Ù†Ø¸Ø§Ù… Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª\"

ØªÙ… Ø¨Ù†Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ \`build.sh\`. ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚.

## ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ´ØºÙŠÙ„

1. Ù‚Ù… Ø¨ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¥Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª:
   \`\`\`bash
   npm install --production
   \`\`\`

2. Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©:
   \`\`\`bash
   node index.js
   \`\`\`

## Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù‡Ø§Ù…Ø©

- ØªØ£ÙƒØ¯ Ù…Ù† ØªÙƒÙˆÙŠÙ† Ù…Ù„Ù \`.env\` Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù‚Ø¨Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„.
- ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª PostgreSQL ÙˆØªÙƒÙˆÙŠÙ†Ù‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.
- ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© (\`fonts\`, \`shared\`, \`uploads\`) ÙˆØªÙƒÙˆÙŠÙ†Ù‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­." > server/dist/README.md

echo "âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­!"