# حل مشاكل البناء ودليل النشر الشامل

## مشاكل البناء المحددة والحلول

### 1. مشكلة: فئات Tailwind غير معرفة (`border-border`, `bg-background`, `text-foreground`)

#### الحل:
1. **فتح ملف `client/src/index.css`**
2. **تعديل قسم `@layer base`**:
   ```css
   @layer base {
     * {
       @apply border-[hsl(var(--border))]; /* استخدام صيغة متغير CSS مباشرة */
     }

     body {
       @apply font-sans antialiased;
       background-color: hsl(var(--background)); /* استخدام خاصية CSS مباشرة بدلاً من الفئة */
       color: hsl(var(--foreground)); /* استخدام خاصية CSS مباشرة بدلاً من الفئة */
       font-family: 'Cairo', sans-serif;
     }

     .dark body {
       background-color: hsl(var(--background));
     }

     h1, h2, h3, h4, h5, h6 {
       font-family: 'Tajawal', sans-serif;
     }
   }
   ```

3. **تحديث ملف `tailwind.config.ts`**:
   ```typescript
   content: ["./client/index.html", "./client/src/**/*.{js,jsx,ts,tsx}", "./client/src/**/*.css"],
   ```

### 2. مشكلة: محتوى Tailwind غير محدد في ملف التكوين

#### الحل:
تأكد من أن خاصية `content` في `tailwind.config.ts` تشمل جميع الملفات التي تستخدم فئات Tailwind. أضفنا `./client/src/**/*.css` للتأكد من أنه يمكن العثور على الفئات المستخدمة في ملفات CSS.

## خطوات البناء الشاملة

### 1. تحضير الجهاز المحلي

1. **تثبيت Node.js وnpm**:
   تأكد من تثبيت Node.js (الإصدار 18 أو أحدث) وnpm.

2. **استنساخ المشروع**:
   ```bash
   git clone <رابط-المستودع> certificates-project
   cd certificates-project
   ```

3. **تثبيت التبعيات**:
   ```bash
   npm install
   ```

4. **تصحيح ملفات CSS** كما هو موضح أعلاه.

### 2. بناء المشروع

1. **منح صلاحيات التنفيذ للسكريبتات**:
   ```bash
   chmod +x build-all.sh client/build-dist.sh server/build-dist.sh package-files.sh
   ```

2. **تنفيذ سكريبت البناء الشامل**:
   ```bash
   ./build-all.sh
   ```

3. **بناء منفصل (إذا فشل البناء الشامل)**:
   ```bash
   # بناء الواجهة الأمامية
   cd client
   ./build-dist.sh
   cd ..

   # بناء الخادم
   cd server
   ./build-dist.sh
   cd ..

   # تجميع الملفات
   ./package-files.sh
   ```

### 3. نشر المشروع على استضافة Hostinger

1. **إنشاء قاعدة بيانات MySQL في Hostinger**:
   - سجل دخولك إلى لوحة تحكم Hostinger
   - انتقل إلى قسم "قواعد البيانات"
   - أنشئ قاعدة بيانات جديدة واحتفظ بمعلومات الاتصال
     * اسم قاعدة البيانات
     * اسم المستخدم
     * كلمة المرور
     * اسم المضيف (عادة `localhost`)

2. **رفع الملفات إلى الاستضافة**:
   - استخدم FTP أو مدير الملفات في لوحة تحكم Hostinger
   - انتقل إلى المجلد الرئيسي `public_html`
   - قم برفع جميع محتويات مجلد `build` إلى المجلد الرئيسي

3. **تشغيل مثبت التطبيق**:
   - افتح موقعك في المتصفح (مثلاً: `https://your-domain.com`)
   - سيتم توجيهك تلقائياً إلى صفحة التثبيت
   - أدخل معلومات قاعدة البيانات وأكمل خطوات التثبيت

4. **ضبط الصلاحيات**:
   - `/uploads` (صلاحيات 755 أو 775)
   - `/temp` (صلاحيات 755 أو 775)

5. **تغيير كلمة المرور الافتراضية**:
   - سجل دخولك باستخدام اسم المستخدم `admin` وكلمة المرور `700700`
   - قم بتغيير كلمة المرور من إعدادات الحساب

## حل مشاكل شائعة

### مشاكل CSS/Tailwind:

1. **خطأ في فئات Tailwind غير معرفة**:
   - استخدم صيغة `className="bg-[#ffffff]"` للألوان المباشرة
   - استخدم `style={{ backgroundColor: 'hsl(var(--background))' }}` للمتغيرات

2. **مشكلة في تكوين Tailwind**:
   - تأكد من تكوين خاصية `content` بشكل صحيح
   - أعد تشغيل عملية البناء بعد تحديث ملف التكوين

### مشاكل بناء المشروع:

1. **فشل عملية البناء الشاملة**:
   - جرب البناء المنفصل للواجهة والخادم كما هو موضح أعلاه
   - تحقق من سجلات الأخطاء لتحديد السبب الدقيق

2. **مشاكل في التبعيات**:
   - حاول تنفيذ `npm install` مرة أخرى
   - تحقق من وجود ملف `package-lock.json` وحذفه إذا كان ذلك ضرورياً

### مشاكل النشر على Hostinger:

1. **الصفحة البيضاء بعد النشر**:
   - تحقق من سجلات PHP في لوحة تحكم Hostinger
   - تأكد من صحة تكوين ملف `.htaccess`

2. **مشاكل في قاعدة البيانات**:
   - تأكد من صحة معلومات الاتصال
   - تحقق من وجود امتيازات كافية للمستخدم

3. **صور أو أصول مفقودة**:
   - تأكد من رفع جميع المجلدات المطلوبة
   - تحقق من صلاحيات الوصول للمجلدات

## ملاحظات هامة

- تأكد من حفظ معلومات قاعدة البيانات ومعلومات الدخول الخاصة بك بأمان
- قم بإجراء نسخ احتياطي منتظم للموقع بعد النشر
- قم بتعطيل الوصول إلى مجلد `install` بعد إكمال عملية التثبيت
- تأكد من تكوين HTTPS لموقعك من خلال لوحة تحكم Hostinger

---

إذا واجهت أي مشاكل إضافية أثناء البناء أو النشر، يرجى الرجوع إلى الملفات التفصيلية:
- `hostinger-build-guide.md` - دليل النشر على Hostinger
- `render-deploy.md` - دليل النشر على منصة Render
- `css-fix-guide.md` - دليل إصلاح مشاكل CSS